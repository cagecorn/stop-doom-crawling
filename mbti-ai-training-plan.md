# MBTI 기반 AI 시스템 고도화 계획

본 문서는 게임 내 AI의 행동을 더욱 다채롭고 지능적으로 만들기 위한 텐서플로우(TensorFlow) 기반 AI 모델 개발 계획을 정의한다.

## Phase 1: 규칙 기반 데이터 자동 수집

**목표**: 모델 학습에 필요한 초기 데이터셋을 자동으로 대량 확보한다.

1.  **자동 라벨링 로직 구현**:
    * `MbtiEngine` 내에 AI의 행동(공격, 이동, 스킬 사용 등)과 게임 내 상황(체력, 주변 적/아군 수)을 기반으로 MBTI 특성(E/I, S/N, T/F, J/P)을 자동으로 부여하는 규칙을 정의한다.
    * 이 규칙은 실제 MBTI 이론 및 전술 정보를 해석하여 최대한 정교하게 설계한다.

2.  **데이터 기록 시스템 연동**:
    * AI가 행동할 때마다, 자동 라벨링 로직을 통해 생성된 라벨과 그 순간의 상황 데이터(`buildInput`의 결과)를 한 쌍으로 묶는다.
    * `DataRecorder`를 통해 이 데이터 쌍을 지속적으로 누적하고, CSV 파일 형태로 다운로드할 수 있는 기능을 유지한다.

## Phase 2: AI 모델 설계 및 학습

**목표**: 수집된 데이터를 사용하여 상황을 입력받아 MBTI 특성을 예측하는 신경망 모델을 훈련시킨다.

1.  **데이터 전처리**:
    * 1단계에서 수집한 CSV 데이터를 분석하고, 정규화 및 범주형 데이터 변환(One-hot encoding) 등 모델 학습에 적합한 형태로 가공한다.

2.  **모델 아키텍처 설계**:
    * 입력(상황 데이터)과 출력(MBTI 특성)에 맞는 간단한 순차 모델(Sequential Model)을 텐서플로우(tf.js 또는 Python TensorFlow)를 사용해 설계한다.
    * 예: `Dense(16)` -> `ReLU` -> `Dense(16)` -> `ReLU` -> `Dense(8)` -> `Softmax`

3.  **모델 훈련 및 평가**:
    * 전처리된 데이터로 모델을 훈련시킨다.
    * 훈련된 모델의 정확도와 손실률을 평가하고, 하이퍼파라미터(학습률, 에포크 등)를 조정하며 모델 성능을 최적화한다.
    * 최종적으로 훈련된 모델을 `model.json`과 가중치 파일 형태로 저장한다.

## Phase 3: 게임 내 모델 통합 및 실시간 예측

**목표**: 훈련된 모델을 게임에 탑재하여, AI가 실시간으로 자신의 상황에 맞는 MBTI 특성을 예측하도록 한다.

1.  **`MbtiEngine` 모드 전환**:
    * 데이터 수집 모드에서 '예측 모드'로 전환하는 로직을 추가한다.
    * `MbtiEngine`이 시작될 때 훈련된 `model.json`을 로드하도록 수정한다.

2.  **실시간 예측 실행**:
    * AI가 행동할 때마다, 현재 상황 데이터를 모델에 입력하여 가장 확률이 높은 MBTI 특성을 실시간으로 예측한다.
    * 예측된 특성을 `ai_mbti_trait_triggered` 이벤트로 발행한다.

## Phase 4: 특성 기반 행동 구현

**목표**: 예측된 MBTI 특성이 실제 AI의 행동에 의미 있는 변화를 주도록 구현한다.

1.  **이벤트 구독 및 처리**:
    * `ai_mbti_trait_triggered` 이벤트를 구독하는 새로운 매니저 또는 로직을 `game.js`에 추가한다.
    * 발현된 특성에 따라 AI에게 보너스(버프), 페널티(디버프)를 주거나, 다음 행동 결정에 영향을 미치는 로직을 구현한다.
    * **예시**: 'T' 특성이 발현되면 10초간 공격력 5% 증가, 'F' 특성이 발현되면 가장 체력이 낮은 아군에게 이동하려는 경향 증가 등.
